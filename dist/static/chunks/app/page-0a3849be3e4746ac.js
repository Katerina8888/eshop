(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5167:(e,t,r)=>{Promise.resolve().then(r.bind(r,1e3))},1e3:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(5155),a=r(2115);let n=()=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"white",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"white",className:"size-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})});var l=r(8173),i=r.n(l);let c=e=>{let{numberOfItems:t}=e;return(0,s.jsxs)(i(),{className:"fixed bottom-3 right-3 md:bottom-6 md:right-6 bg-orange-400 w-[3rem] h-[3rem] md:w-[6rem] md:h-[6rem] rounded-md [&>div]:hover:rounded-md [&>div]:hover:bg-orange-500 [&>div]:hover:scale-x-[-1]",href:"/cart",children:[(0,s.jsx)("div",{children:(0,s.jsx)(n,{})}),0!==t&&(0,s.jsx)("span",{className:"rounded-full w-[2rem] font-bold h-[2rem] bg-orange-600 text-white absolute top-[-10px] right-[-10px] text-center",children:t})]})};var o=r(5565);function d(e){let{value:t,onChange:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{className:"w-[20px] md:w-[32px]",onClick:e=>{r(Math.max(0,t-1)),e.stopPropagation()},children:"-"}),(0,s.jsx)("span",{className:"inline-flex w-[1.5rem] md:w-[2rem] justify-center",children:t}),(0,s.jsx)("button",{className:"w-[20px] md:w-[32px]",onClick:e=>{r(t+1),e.stopPropagation()},children:"+"})]})}function u(e){let{clickedProduct:t}=e,[r,n]=(0,a.useState)(!1),[l,i]=(0,a.useState)(1),c=()=>{let e=localStorage.getItem("cart"),r=e?JSON.parse(e):[];if(!Array.isArray(r)){console.error("Error. Resetting cart."),localStorage.setItem("cart",JSON.stringify([]));return}let s=r.findIndex(e=>e.id===t.id);-1!==s?r[s].quantity+=l:r.push({...t,quantity:l}),localStorage.setItem("cart",JSON.stringify(r))};return(0,s.jsx)("div",{className:"w-full md:w-3/4 flex justify-end whitespace-nowrap",children:r?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d,{value:l,onChange:e=>i(e)}),(0,s.jsx)("button",{className:"ml-2 uppercase",onClick:()=>{c(),n(!1)},children:"Add"})]}):(0,s.jsx)("button",{className:"uppercase",onClick:()=>n(!0),children:"Buy"})})}function m(e){let t,{product:r}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center pt-6 lg:pt-20 max-w-[300px] mx-auto",children:[(0,s.jsx)("h2",{className:"text-sm md:text-2xl font-bold pb-6",children:(null==(t=r.title)?void 0:t.length)>20?"".concat(t.substring(0,20),"..."):t}),(0,s.jsx)(o.default,{className:"w-[300px]",src:r.image,width:"800",height:"1200",alt:"",loading:"lazy"}),(0,s.jsxs)("div",{className:"flex w-full justify-between mt-4",children:[(0,s.jsxs)("span",{className:"font-bold w-full",children:[r.price," â‚¬"]}),(0,s.jsx)(u,{clickedProduct:r})]})]},r.id)}function h(e){let{data:t}=e;return(0,s.jsx)(s.Fragment,{children:t.map((e,t)=>(0,s.jsx)(m,{product:e},t))})}async function x(){let e=await fetch("https://raw.githubusercontent.com/Katerina8888/cake-fake-api/main/data.json");if(!e.ok)throw Error("Failed to fetch data");return e.json()}function f(){let[e,t]=(0,a.useState)([]),r=function(){let[e,t]=(0,a.useState)([]),r=()=>{let e=localStorage.getItem("cart");t(e?JSON.parse(e):[])};return(0,a.useEffect)(()=>{r();let e=()=>{r()};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]),e}(),[n,l]=(0,a.useState)(0);return(0,a.useEffect)(()=>{x().then(e=>t(e)).catch(e=>console.error("Error fetching data:",e))},[]),(0,a.useEffect)(()=>{l(r.reduce((e,t)=>e+t.quantity,0))},[r]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-8",children:(0,s.jsx)(h,{data:e})}),(0,s.jsx)(c,{numberOfItems:n})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[465,441,517,358],()=>t(5167)),_N_E=e.O()}]);